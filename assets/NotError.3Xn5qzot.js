var t,e;import{_ as s,m as l,a as i,r as u,b as a,c as n,o,d as r,w as c,Q as h,e as d,x as p,n as m,f as A,g,k as b,Z as y,q as f,s as Q,J as B,B as C,t as E,C as v,v as I,O as S,j as k}from"./index-wnp2UUPM.js";import{_ as T}from"./uv-line-progress.DZTtC1vy.js";import{_ as U}from"./uv-button.D0kYjSME.js";import{f as x}from"./date.B8FaB0HV.js";const _=s({name:"uv-number-box",mixins:[l,i,{props:{value:{type:[String,Number],default:0},modelValue:{type:[String,Number],default:0},name:{type:[String,Number],default:""},min:{type:[String,Number],default:1},max:{type:[String,Number],default:Number.MAX_SAFE_INTEGER},step:{type:[String,Number],default:1},integer:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},disabledInput:{type:Boolean,default:!1},asyncChange:{type:Boolean,default:!1},inputWidth:{type:[String,Number],default:35},showMinus:{type:Boolean,default:!0},showPlus:{type:Boolean,default:!0},decimalLength:{type:[String,Number,null],default:null},longPress:{type:Boolean,default:!0},color:{type:String,default:"#323233"},buttonSize:{type:[String,Number],default:30},bgColor:{type:String,default:"#EBECEE"},cursorSpacing:{type:[String,Number],default:100},disablePlus:{type:Boolean,default:!1},disableMinus:{type:Boolean,default:!1},iconStyle:{type:[Object,String],default:""},...null==(e=null==(t=uni.$uv)?void 0:t.props)?void 0:e.numberBox}}],data:()=>({currentValue:"",longPressTimer:null}),watch:{watchChange(t){this.check()},value(t){t!==this.currentValue&&(this.currentValue=this.format(this.value))},modelValue(t){t!==this.currentValue&&(this.currentValue=this.format(this.modelValue))}},computed:{getCursorSpacing(){return this.$uv.getPx(this.cursorSpacing)},buttonStyle(){return t=>{const e={backgroundColor:this.bgColor,height:this.$uv.addUnit(this.buttonSize),color:this.color};return this.isDisabled(t)&&(e.backgroundColor="#f7f8fa"),e}},inputStyle(){this.disabled||this.disabledInput;return{color:this.color,backgroundColor:this.bgColor,height:this.$uv.addUnit(this.buttonSize),width:this.$uv.addUnit(this.inputWidth)}},watchChange(){return[this.integer,this.decimalLength,this.min,this.max]},isDisabled(){return t=>"plus"===t?this.disabled||this.disablePlus||this.currentValue>=this.max:this.disabled||this.disableMinus||this.currentValue<=this.min}},created(){this.init()},methods:{init(){const t=this.value||this.modelValue;this.currentValue=this.format(t)},format(t){return t=""===(t=this.filter(t))?0:+t,t=Math.max(Math.min(this.max,t),this.min),null!==this.decimalLength&&(t=t.toFixed(this.decimalLength)),t},filter(t){return t=String(t).replace(/[^0-9.-]/g,""),this.integer&&-1!==t.indexOf(".")&&(t=t.split(".")[0]),t},check(){const t=this.format(this.currentValue);t!==this.currentValue&&(this.currentValue=t)},onFocus(t){this.$emit("focus",{...t.detail,name:this.name})},onBlur(t){this.format(t.detail.value),this.$emit("blur",{...t.detail,name:this.name})},onInput(t){const{value:e=""}=t.detail||{};if(""===e)return;let s=this.filter(e);if(null!==this.decimalLength&&-1!==s.indexOf(".")){const t=s.split(".");s=`${t[0]}.${t[1].slice(0,this.decimalLength)}`}s=this.format(s),this.emitChange(s)},emitChange(t){this.asyncChange||this.$nextTick((()=>{this.$emit("input",t),this.$emit("update:modelValue",t),this.currentValue=t,this.$forceUpdate()})),this.$emit("change",{value:t,name:this.name})},onChange(){const{type:t}=this;if(this.isDisabled(t))return this.$emit("overlimit",t);const e="minus"===t?-this.step:+this.step,s=this.format(this.add(+this.currentValue,e));this.emitChange(s),this.$emit(t)},add(t,e){const s=Math.pow(10,10);return Math.round((t+e)*s)/s},clickHandler(t){this.type=t,this.onChange()},longPressStep(){this.clearTimeout(),this.longPressTimer=setTimeout((()=>{this.onChange(),this.longPressStep()}),250)},onTouchStart(t){this.longPress&&(this.clearTimeout(),this.type=t,this.longPressTimer=setTimeout((()=>{this.onChange(),this.longPressStep()}),600))},onTouchEnd(){this.longPress&&this.clearTimeout()},clearTimeout(){clearTimeout(this.longPressTimer),this.longPressTimer=null}}},[["render",function(t,e,s,l,i,f){const Q=b,B=u(n("uv-icon"),a),C=y;return o(),r(Q,{class:"uv-number-box"},{default:c((()=>[t.showMinus&&t.$slots.minus?(o(),r(Q,{key:0,class:"uv-number-box__slot",onClick:e[0]||(e[0]=h((t=>f.clickHandler("minus")),["stop"])),onTouchstart:e[1]||(e[1]=t=>f.onTouchStart("minus")),onTouchend:h(f.clearTimeout,["stop"])},{default:c((()=>[d(t.$slots,"minus",{},void 0,!0)])),_:3},8,["onTouchend"])):t.showMinus?(o(),r(Q,{key:1,class:p(["uv-number-box__minus",{"uv-number-box__minus--disabled":f.isDisabled("minus")}]),onClick:e[2]||(e[2]=h((t=>f.clickHandler("minus")),["stop"])),onTouchstart:e[3]||(e[3]=t=>f.onTouchStart("minus")),onTouchend:h(f.clearTimeout,["stop"]),"hover-class":"uv-number-box__minus--hover","hover-stay-time":"150",style:m([f.buttonStyle("minus")])},{default:c((()=>[A(B,{name:"minus",color:f.isDisabled("minus")?"#c8c9cc":"#323233",size:"15",bold:"",customStyle:t.iconStyle},null,8,["color","customStyle"])])),_:1},8,["onTouchend","class","style"])):g("",!0),d(t.$slots,"input",{},(()=>[A(C,{disabled:t.disabledInput||t.disabled,"cursor-spacing":f.getCursorSpacing,class:p([{"uv-number-box__input--disabled":t.disabled||t.disabledInput},"uv-number-box__input"]),modelValue:i.currentValue,"onUpdate:modelValue":e[4]||(e[4]=t=>i.currentValue=t),onBlur:f.onBlur,onFocus:f.onFocus,onInput:f.onInput,type:"number",style:m([f.inputStyle])},null,8,["disabled","cursor-spacing","class","modelValue","onBlur","onFocus","onInput","style"])]),!0),t.showPlus&&t.$slots.plus?(o(),r(Q,{key:2,class:"uv-number-box__slot",onClick:e[5]||(e[5]=h((t=>f.clickHandler("plus")),["stop"])),onTouchstart:e[6]||(e[6]=t=>f.onTouchStart("plus")),onTouchend:h(f.clearTimeout,["stop"])},{default:c((()=>[d(t.$slots,"plus",{},void 0,!0)])),_:3},8,["onTouchend"])):t.showPlus?(o(),r(Q,{key:3,class:p(["uv-number-box__plus",{"uv-number-box__minus--disabled":f.isDisabled("plus")}]),onClick:e[7]||(e[7]=h((t=>f.clickHandler("plus")),["stop"])),onTouchstart:e[8]||(e[8]=t=>f.onTouchStart("plus")),onTouchend:h(f.clearTimeout,["stop"]),"hover-class":"uv-number-box__plus--hover","hover-stay-time":"150",style:m([f.buttonStyle("plus")])},{default:c((()=>[A(B,{name:"plus",color:f.isDisabled("plus")?"#c8c9cc":"#323233",size:"15",bold:"",customStyle:t.iconStyle},null,8,["color","customStyle"])])),_:1},8,["onTouchend","class","style"])):g("",!0)])),_:3})}],["__scopeId","data-v-e317a263"]]),D=s(f({__name:"ShareBill",props:{close:{type:Function}},setup(t,{expose:e}){const s=Q({has_data:!0,group_buy_no:"",group_buy_type:"",total_amount:0,current_participants:0,target_participants:0,paid_amount:0,per_person_amount:0,remaining_amount:0,deadline:""}),l=Q(),i=()=>{I.service.groupBuy$join({group_buy_no:s.value.group_buy_no}).then((t=>{t.success(((t,e)=>{l.value.hide(),S({title:I.t("other.5"),icon:"none"})}))}))};return I.service.groupBuy$activeDetail({}).then((t=>{t.success((t=>{s.value=t}))})),e({modalRef:l}),(t,e)=>{const a=b,h=u(n("uv-line-progress"),T),d=u(n("uv-button"),U),p=B("bt-popup");return o(),r(p,{ref_key:"modalRef",ref:l},{default:c((()=>[A(a,{class:"detail"},{default:c((()=>[A(a,{class:"top"},{default:c((()=>[A(a,{class:"top-first"},{default:c((()=>[A(a,null,{default:c((()=>[C("p",null,E(v(I).t("page.order.3"))+"：",1),C("p",{class:"buyno"},E(s.value.group_buy_no),1)])),_:1}),A(a,{class:"time"},{default:c((()=>[C("img",{class:"img-fill",src:"data:image/png;base64,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",alt:""}),C("p",null,E(v(x)(s.value.deadline)),1)])),_:1})])),_:1}),A(a,null,{default:c((()=>[C("p",null,E(v(I).t("dialog.shareBill.2"))+"：",1),C("p",null,E(s.value.group_buy_type),1)])),_:1})])),_:1}),A(a,{class:"total-money"},{default:c((()=>[C("p",null,E(v(I).t("dialog.shareBill.3")),1),C("p",null,"$"+E(s.value.total_amount),1)])),_:1}),A(a,{class:"bottom"},{default:c((()=>[A(a,{class:"item"},{default:c((()=>[A(a,null,{default:c((()=>[C("p",{class:"first-p"},E(v(I).t("dialog.shareBill.4")),1),C("p",null,E(s.value.current_participants)+"/"+E(s.value.target_participants)+"人",1)])),_:1}),A(a,{class:"progress-view"},{default:c((()=>[A(h,{percentage:s.value.current_participants/s.value.target_participants*100,showText:!1,activeColor:"#ff4d4f",inactiveColor:"#E5E7EB"},null,8,["percentage"])])),_:1}),A(a,null,{default:c((()=>[C("p",{class:"first-p"},E(v(I).t("dialog.shareBill.5")),1),C("p",{class:"second-p"},"$"+E(s.value.paid_amount),1)])),_:1})])),_:1})])),_:1}),s.value.has_data?(o(),r(a,{key:0,class:"btn-wrap"},{default:c((()=>[A(d,{onClick:i,customStyle:{height:"96rpx"},text:`${v(I).t("dialog.shareBill.6")} $ ${s.value.per_person_amount}`,color:"#FF4D4F"},null,8,["text"])])),_:1})):g("",!0)])),_:1})])),_:1},512)}}}),[["__scopeId","data-v-b06ff238"]]),w=""+new URL("error-BW4rYQcZ.png",import.meta.url).href,K=s(f({__name:"NotError",props:{close:{type:Function}},setup(t,{expose:e}){const s=Q();return e({modalRef:s}),(t,e)=>{const l=b,i=B("bt-popup");return o(),r(i,{ref_key:"modalRef",ref:s},{default:c((()=>[A(l,{class:"detail"},{default:c((()=>[C("img",{src:w,alt:""}),A(l,null,{default:c((()=>[k(E(v(I).t("dialog.notError.1")),1)])),_:1})])),_:1})])),_:1},512)}}}),[["__scopeId","data-v-7587e18e"]]);export{K as N,D as S,_};
